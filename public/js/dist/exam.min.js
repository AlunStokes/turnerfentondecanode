$(document).ready(function(){function e(e){return e.match(/\d+/)[0]}function t(e){for(var t=0,n=0;n<e.length;n++)void 0!==e[n]&&t++;return t}var n=[],s=$("#submit-exam-btn");$('input[type="radio"]').change(function(){var o=e(this.id);n[o]=this.value,$("#given-answer-"+o).html(this.value),t(n)==$(".question").length?s.prop("disabled")&&s.prop("disabled",!1):s.prop("disabled")||s.prop("disabled",!0)}),s.on("click",function(){t(n)<$(".question").length?(s.prop("disabled",!0),notify("Answer all questions before submitting","warning","exclamation")):$.ajax({type:"POST",url:"ajax",data:{ajaxid:"checkExam",givenAnswers:JSON.stringify(n)}}).done(function(e){if(e.err)notify(e.err,"danger","exclamation");else{if(!e.showScore)return notify("Your exam score is not shown for this exam, but it has been submitted and you may leave the page.","success","check"),void $("html, body").animate({scrollTop:0},"slow");var t=e.answers,o=0;s.prop("disabled",!0),$("input:radio").attr("disabled","disabled");for(var r=0;r<t.length;r++)n[r]==t[r]?(o++,$("#given-answer-"+r).css("color","#5cb85c")):($("#given-answer-"+r).css("color","#d9534f"),$("#given-answer-"+r).html("<p>Your Answer: </p>"+n[r]+"<br /><p>Correct Answer: </p>"+t[r]));$("#score").html(o+"/"+t.length+" answered correctly"),o/t.length>=.8?$("#score").css("color","#5cb85c"):o/t.length>=.65?$("#score").css("color","#f0ad4e"):$("#score").css("color","#d9534f"),notify("Your exam has been submitted.  You may leave the page.","success","check"),$("html, body").animate({scrollTop:0},"slow")}})})}),socket.emit("writingExam",studentNumber),setInterval(function(){socket.emit("stillWritingExam",studentNumber)},3e3);