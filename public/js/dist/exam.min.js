$(document).ready(function(){function e(e){return e.match(/\d+/)[0]}function t(e){for(var t=0,r=0;r<e.length;r++)void 0!==e[r]&&t++;return t}var r=[],s=$("#submit-exam-btn");$('input[type="radio"]').change(function(){var n=e(this.id);r[n]=this.value,$("#given-answer-"+n).html(this.value),t(r)==$(".question").length?s.prop("disabled")&&s.prop("disabled",!1):s.prop("disabled")||s.prop("disabled",!0)}),s.on("click",function(){t(r)<$(".question").length?(s.prop("disabled",!0),alert("Answer all questions before submitting")):$.ajax({type:"POST",url:"ajax",data:{ajaxid:"checkExam",givenAnswers:JSON.stringify(r)}}).done(function(e){if(e.err)alert(e.err);else{if(!e.showScore)return alert("Your exam score is not shown for this exam, but it has been submitted and you may leave the page."),void $("html, body").animate({scrollTop:0},"slow");var t=e.answers,n=0;s.prop("disabled",!0),$("input:radio").attr("disabled","disabled");for(var o=0;o<t.length;o++)r[o]==t[o]?(n++,$("#given-answer-"+o).css("color","#5cb85c")):($("#given-answer-"+o).css("color","#d9534f"),$("#given-answer-"+o).html("<p>Your Answer: </p>"+r[o]+"<br /><p>Correct Answer: </p>"+t[o]));$("#score").html(n+"/"+t.length+" answered correctly"),n/t.length>=.8?$("#score").css("color","#5cb85c"):n/t.length>=.65?$("#score").css("color","#f0ad4e"):$("#score").css("color","#d9534f"),alert("Your exam has been submitted.  You may leave the page."),$("html, body").animate({scrollTop:0},"slow")}})})}),socket.emit("writingExam",studentNumber),setInterval(function(){socket.emit("stillWritingExam",studentNumber)},3e3);