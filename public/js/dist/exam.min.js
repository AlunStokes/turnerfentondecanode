$(document).ready(function(){function e(e){return e.match(/\d+/)[0]}function r(e){for(var r=0,t=0;t<e.length;t++)void 0!==e[t]&&r++;return r}var t=[],n=$("#submit-exam-btn");$('input[type="radio"]').change(function(){var s=e(this.id);t[s]=this.value,$("#given-answer-"+s).html(this.value),r(t)==$(".question").length?n.prop("disabled")&&n.prop("disabled",!1):n.prop("disabled")||n.prop("disabled",!0)}),n.on("click",function(){r(t)<$(".question").length?(n.prop("disabled",!0),alert("Answer all questions before submitting")):$.ajax({type:"POST",url:"ajax",data:{ajaxid:"checkExam",givenAnswers:JSON.stringify(t)}}).done(function(e){if(e.err)alert(e.err);else{var r=e.answers,s=0;n.prop("disabled",!0),$("input:radio").attr("disabled","disabled");for(var a=0;a<r.length;a++)t[a]==r[a]?(s++,$("#given-answer-"+a).css("color","#5cb85c")):($("#given-answer-"+a).css("color","#d9534f"),$("#given-answer-"+a).html("<p>Your Answer: </p>"+t[a]+"<br /><p>Correct Answer: </p>"+r[a]));$("#score").html(s+"/"+r.length+" answered correctly"),s/r.length>=.8?$("#score").css("color","#5cb85c"):s/r.length>=.65?$("#score").css("color","#f0ad4e"):$("#score").css("color","#d9534f"),alert("Your exam has been submitted.  You may leave the page."),$("html, body").animate({scrollTop:0},"slow")}})})}),socket.emit("writingExam",studentNumber),setInterval(function(){socket.emit("stillWritingExam",studentNumber)},3e3);