$(document).ready(function(){function e(e){return e.match(/\d+/)[0]}function t(e){for(var t=0,n=0;n<e.length;n++)void 0!==e[n]&&t++;return t}function n(){$.ajax({type:"POST",url:"ajax",data:{ajaxid:"checkExam",givenAnswers:JSON.stringify(r)}}).done(function(e){if(e.err)notify(e.err,"danger","exclamation");else{if(!e.showScore)return notify("Your exam score is not shown for this exam, but it has been submitted and you may leave the page.","success","check"),void $("html, body").animate({scrollTop:0},"slow");var t=e.answers,n=0;s.prop("disabled",!0),$("input:radio").attr("disabled","disabled");for(var o=0;o<t.length;o++)r[o]==t[o]?(n++,$("#given-answer-"+o).css("color","#5cb85c")):($("#given-answer-"+o).css("color","#d9534f"),$("#given-answer-"+o).html("<p>Your Answer: </p>"+r[o]+"<br /><p>Correct Answer: </p>"+t[o]));$("#score").html(n+"/"+t.length+" answered correctly"),n/t.length>=.8?$("#score").css("color","#5cb85c"):n/t.length>=.65?$("#score").css("color","#f0ad4e"):$("#score").css("color","#d9534f"),notify("Your exam has been submitted.  You may leave the page.","success","check"),$("html, body").animate({scrollTop:0},"slow")}})}var r=Array($(".question").length),o=[];r.setAll("");var s=$("#submit-exam-btn");try{$("#timer").startTimer({onComplete:n})}catch(e){}socket.emit("writingExam",studentNumber),setInterval(function(){socket.emit("stillWritingExam",studentNumber)},6e4),$('input[type="radio"]').change(function(){var n=e(this.id);r[n]=this.value,o[n]=1,$("#given-answer-"+n).html(this.value),t(o)==$(".question").length?s.prop("disabled")&&s.prop("disabled",!1):s.prop("disabled")||s.prop("disabled",!0)}),s.on("click",function(){t(o)<$(".question").length?(s.prop("disabled",!0),notify("Answer all questions before submitting","warning","exclamation")):n()})});