function loadQuestions(e,s,t,o){$.ajax({type:"GET",url:"ajax",data:{ajaxid:"getQuestionList",cluster:e,offset:t,search:s,questionsPer:questionsPer}}).done(function(e){questionsLoaded+=e.length,loadedQuestions=loadedQuestions.concat(e),o(e)})}function addQuestionsNotAdded(e){$("#load-more-questions")&&$("#load-more-questions").remove();var s="";0==e.length?s='<h1 class="text small thin dark">no more results</h1>':(s+=generateQuestionsHTML(e),s+='<button class="btn btn-lg btn-block active-color" id="load-more-questions">Load more</button>'),questionAreaNotAdded.append(s)}function replaceQuestionsNotAdded(e){questionsLoaded=questionsPer;var s="";0==e.length?s='<h1 class="text small thin dark">0 results returned</h1>':(s+=generateQuestionsHTML(e),s+='<button class="btn btn-lg btn-block active-color" id="load-more-questions">Load more</button>'),questionAreaNotAdded.html(s)}function generateQuestionsHTML(e){for(var s="",t=0;t<e.length;t++)s+=generateQuestionHTML(e[t],t);return s}function generateQuestionHTML(e,s){var t="",o=["A","B","C","D"];t+='<div class="question" id="question-'+e.questionid+'"><div class="row"><div class="col-lg-10 col-xs-9"><h1 class="text small thin dark">',t+="<i><b>"+(questionsLoaded-questionsPer+s+1)+". </b></i>",t+=e.question+'</h1></div><div class="col-lg-2 col-xs-3">',t+="</div></div><br>";for(var n=0;n<4;n++)t+='<div class="row"><div class="col-lg-8 col-xs-10"><label for="rb-'+s+"-"+o[n]+'"><h1 class="text xsmall thin dark"><i><b>'+o[n]+". </b></i>"+e["option"+o[n]]+"</h1></div></div>";return t+='<div class="row"><div class="col-lg-8 col-xs-10"<h1 class="text xsmall thin dark"><i>Answer: '+e.answer+"</i></h1></div></div><hr></div>"}function getNum(e){return e.match(/\d+/)[0]}function indexInArrayObject(e,s,t){for(var o=0;o<e.length;o++)if(e[o][s]==t)return o;return-1}var loadQuestionsCluster,questionsSearchInput,questionAreaNotAdded,loadedQuestions=[],questionsLoaded=0,questionsPer=25,questionsCluster,questionsSearch;$(document).ready(function(){loadQuestionsCluster=$("#load-questions-cluster"),questionsSearchInput=$("#questions-search-input"),questionAreaNotAdded=$("#question-area"),questionsCluster=loadQuestionsCluster.val(),questionsSearch=questionsSearchInput.val();var e=loadQuestions(questionsCluster,questionsSearch,questionsLoaded,function(e){addQuestionsNotAdded(e)});$(document).on("click","#load-more-questions",function(){e=loadQuestions(questionsCluster,questionsSearch,questionsLoaded,function(e){addQuestionsNotAdded(e)})}),questionsSearchInput.on("keyup",function(){questionsSearch=questionsSearchInput.val(),loadedQuestions=[],e=loadQuestions(questionsCluster,questionsSearch,questionsLoaded=0,function(e){replaceQuestionsNotAdded(e)})}),loadQuestionsCluster.on("change",function(){questionsCluster=loadQuestionsCluster.val(),loadedQuestions=[],e=loadQuestions(questionsCluster,questionsSearch,questionsLoaded=0,function(e){replaceQuestionsNotAdded(e)})})});